---
title: 'Data 621 Final Project: Contract Renewal Predictions'
author: Critical Thinking Group 2 - James Topor, Armenoush Aslanian-Persico, Jeff
  Nieman, Scott Karr
date: "July 2016"
output: 
  html_document:
    toc: true
    toc_depth: 2
    toc_float: true
    code_folding: show
    theme: spacelab
---

```{r, eval=TRUE, echo=FALSE, include=FALSE}
library(alr3)
library(bestglm)
library(car)
library(ggplot2)
library(dplyr)
library(knitr)
library(lmtest)
library(fBasics)
```


# Part 1: Data Exploration

## Data Dictionary

```{r, echo=FALSE}
url1 <- "https://raw.githubusercontent.com/spsstudent15/2016-02-621-W2/master/621-FP-data-dictionary.csv"

ddict <- read.csv(url1, stringsAsFactors = FALSE)  

kable(ddict)
```

## Summary Statistics

```{r, fig.width = 9, fig.height = 7, include = TRUE, echo=FALSE}
#url <- "https://raw.githubusercontent.com/spsstudent15/2016-02-621-W2/master/621-FP-data-not-transformed.csv"

url <- "https://raw.githubusercontent.com/spsstudent15/2016-02-621-W2/master/621-FP-data-renewals-as-1.csv"




fp1 <- read.csv(url, stringsAsFactors = TRUE)  

attach(fp1)

summary(fp1)

kable(head(fp1))
```

```{r}
#basicStats(fp1)

```


Our data set contains recent service contracts with Company X, some of which were renewed and some which were not renewed. Our goal is to predict whether a service contract will be renewed based on the attributes in the data set. A renewal is considered successful. 

There are 91726 rows of data, each representing a service contract with Company X. 

We have 15 potential predictor variables and one response variable ("RENEWAL_FLAG") that indicates if the contract was renewed.  


## Analysis of Predictor Variables  

  
```{r, fig.width = 7.5, fig.height = 8.5, echo = FALSE}
# box plots of each predictor variable relative to the response


# par(mfrow=c(4,4)) 

mosaicplot(~ RENEWAL_FLAG + AREA, data = fp1, color = TRUE)

mosaicplot(~ RENEWAL_FLAG + CHANNEL_APPROACH, data = fp1, color = TRUE)

# placeholder CONTRACT_EXPIRATION

mosaicplot(~ RENEWAL_FLAG + CONTRACT_LENGTH, data = fp1, color = TRUE)

mosaicplot(~ RENEWAL_FLAG + SALES_CATEGORY, data = fp1, color = TRUE)

# placeholder SELLER_UNIQUE_ID

mosaicplot(~ RENEWAL_FLAG + CONTRACT_VALUE_CATEGORY, data = fp1, color = TRUE)

mosaicplot(~ RENEWAL_FLAG + CONTRACT_LINE_CATEGORY, data = fp1, color = TRUE)

mosaicplot(~ RENEWAL_FLAG + DISCOUNT_CATEGORY, data = fp1, color = TRUE)

mosaicplot(~ RENEWAL_FLAG + MULTIPLE_SERVICES, data = fp1, color = TRUE)

boxplot(ITEM_COUNT~RENEWAL_FLAG, ylab="ITEM_COUNT", 
        xlab="Renewals", col = "yellow")

# placeholder COST

mosaicplot(~ RENEWAL_FLAG + SALES_STRATEGY, data = fp1, color = TRUE)

```


## Missing Data to be Imputed


The transformed data set can be seen here:

https://raw.githubusercontent.com/spsstudent15/2016-02-621-W2/master/621-FP-Transformed-Data.csv


